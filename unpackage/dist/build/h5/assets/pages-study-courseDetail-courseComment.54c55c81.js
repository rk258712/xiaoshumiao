import{y as t,N as e,o as s,c as a,w as o,i as n,f as l,g as r,t as u,q as i,h as c,W as d,p}from"./index-dc4240aa.js";import{_ as m}from"./uni-rate.5a11a2c1.js";import{r as f}from"./uni-app.es.3b71752e.js";import{_}from"./uni-popup.e565c3b9.js";import{_ as g}from"./_plugin-vue_export-helper.1b428a4d.js";import"./uni-icons.27c1c678.js";const h=g({data:()=>({star:0,text:"",courseData:null,commentRes:null}),onLoad(t){let e=JSON.parse(decodeURIComponent(t.data));this.courseData=e},methods:{onChange(t){this.star=t.value},input(t){this.text=t.detail.value},comment(){if(0==this.text.length)return void t({title:"请输入评论内容",icon:"none",duration:2e3});if(0==this.star)return void t({title:"请选择评分",icon:"none",duration:2e3});let e=this;this.$request.post("/api/course/add_comment",{stars:e.star,content:e.text,courseId:e.courseData.id}).then((t=>{e.$refs.popup.open("center"),e.commentRes=t}),(function(e){t({title:e.msg,duration:2e3,icon:"none"})}))},readComment(){this.$refs.popup.close();let t=this.courseData;e({url:"/pages/study/courseDetail/courseReadComment?data="+encodeURIComponent(JSON.stringify(t))})}}},[["render",function(t,e,g,h,x,C){const v=n,b=f(i("uni-rate"),m),R=c,j=d,y=p,I=f(i("uni-popup"),_);return s(),a(v,null,{default:o((()=>[l(v,{class:"star-bg"},{default:o((()=>[l(v,{class:"d-flex align-items-center"},{default:o((()=>[l(v,null,{default:o((()=>[r("课程评分")])),_:1}),l(b,{onChange:C.onChange,class:"rete","is-fill":!1,size:25,max:5,value:x.star,color:"rgb(252,155,9)","active-color":"rgb(252,155,9)"},null,8,["onChange","value"])])),_:1}),l(R,{class:"star-text"},{default:o((()=>[r(u(x.star.toFixed(1)),1),l(R,{class:"star-suffix"},{default:o((()=>[r("分")])),_:1})])),_:1})])),_:1}),l(v,{class:"uni-textarea"},{default:o((()=>[l(j,{style:{width:"100%"},onInput:C.input,maxlength:"250",placeholder:"请输入您的评价"},null,8,["onInput"])])),_:1}),l(v,{onClick:C.comment,class:"comment-bg"},{default:o((()=>[r("提交评价")])),_:1},8,["onClick"]),l(I,{ref:"popup",type:"center"},{default:o((()=>[l(v,{class:"popup-content"},{default:o((()=>[l(R,{class:"popup-title"},{default:o((()=>[r("感谢您的评价!")])),_:1}),l(v,{class:"gold-coin-bg"},{default:o((()=>[l(y,{class:"gold-coin",src:"/assets/course_gold_coin-ee14174f.png"}),l(R,null,{default:o((()=>[r(u(null==x.commentRes?"+0":x.commentRes.msg),1)])),_:1})])),_:1}),l(v,{onClick:C.readComment,class:"read-comment-btn"},{default:o((()=>[r("查看评价")])),_:1},8,["onClick"])])),_:1})])),_:1},512)])),_:1})}],["__scopeId","data-v-a288bb45"]]);export{h as default};
