import{I as e,y as s,m as t,o as a,c as l,w as o,i as c,f as i,g as r,a as u,t as n,e as d,F as A,b as f,d as m,v as p,q as g,p as h,h as C}from"./index-dc4240aa.js";import{_ as y}from"./uni-nav-bar.f89a8f7c.js";import{r as b}from"./uni-app.es.3b71752e.js";import{_ as k}from"./uni-rate.5a11a2c1.js";import{_ as I}from"./uni-icons.27c1c678.js";import{_,a as D}from"./uni-list.2a5d4a77.js";import{_ as x}from"./_plugin-vue_export-helper.1b428a4d.js";const S=x({data:()=>({courseData:null,courseDetail:null,courseComment:[],courseInfo:null,courseCatalogList:[],user:null,isCollect:!1,selectType:0}),onLoad(e){let s=JSON.parse(decodeURIComponent(e.data));console.log(s),this.courseData=s},onShow(){this.getCourseDetail()},methods:{onClickLeft(){e()},getCourseDetail(){let e=this;this.$request.get("/api/course/course_details_new",{id:this.courseData.id}).then((s=>{e.courseDetail=s.data,e.courseComment=s.data.courseComment,e.courseInfo=s.data.courseInfo,e.user=s.data.userinfo,e.courseCatalogList=e.terrList(s.data.courseInfo.qycCourseCatalogList),e.isCollect=1==s.data.userinfo.isCollection}),(function(e){}))},star(){let e=this;this.$request.post("/api/course/add_collection",{courseId:this.courseData.id}).then((t=>{s({title:"收藏成功",duration:2e3,icon:"none"}),e.isCollect=!0}),(function(e){s({title:e.msg,duration:2e3,icon:"none"})}))},unStar(){let e=this;this.$request.post("/api/course/del_collection",{courseId:this.courseData.id}).then((t=>{s({title:"取消成功",duration:2e3,icon:"none"}),e.isCollect=!1}),(function(e){s({title:e.msg,duration:2e3,icon:"none"})}))},clickSwitch(e){this.selectType=e},clickCourseItem(e){1!=e.chargeStatus?t({url:"/pages/study/courseCatalogDetail/courseCatalogDetail?data="+encodeURIComponent(JSON.stringify(e))}):t({url:"/pages/buy/buy"})},joinStudy(){},writeComment(){let e=this.courseData;t({url:"/pages/study/courseDetail/courseComment?data="+encodeURIComponent(JSON.stringify(e))})},readComment(){let e=this.courseData;t({url:"/pages/study/courseDetail/courseReadComment?data="+encodeURIComponent(JSON.stringify(e))})},terrList(e){const s=[],t={};return e.forEach((e=>{e.children||(e.children=[]),t[e.id]=e})),e.forEach((e=>{const a=t[e.pid];a?a.children.push(e):s.push(e)})),s}},computed:{brief(){return this.courseInfo.brief.replaceAll("img",'img style="width:100%;height:auto"')},coursePrice:()=>function(e){let s=e.price;return 1==this.user.isVip&&(s=e.vipPrice),s.toFixed(2)}}},[["render",function(e,s,t,x,S,B){const K=p("van-icon"),Q=c,W=b(g("uni-nav-bar"),y),R=h,j=C,q=b(g("uni-rate"),k),L=p("van-divider"),w=b(g("uni-icons"),I),O=b(g("uni-list-item"),_),v=b(g("uni-list"),D);return a(),l(Q,null,{default:o((()=>[i(W,{statusBar:"",fixed:!0,border:!1,"left-width":"22px","right-width":"22px"},{left:o((()=>[i(K,{onClick:B.onClickLeft,name:"arrow-left",size:"22",color:"#333"},null,8,["onClick"])])),right:o((()=>[S.isCollect?(a(),l(K,{key:0,onClick:B.unStar,name:"star",size:"20",color:"#FECB65"},null,8,["onClick"])):(a(),l(K,{key:1,onClick:B.star,name:"star-o",size:"20",color:"#333"},null,8,["onClick"]))])),default:o((()=>[i(Q,{class:"title"},{default:o((()=>[r("课程详情")])),_:1})])),_:1}),null!=S.courseDetail?(a(),u(A,{key:0},[i(Q,{class:"head-bg"},{default:o((()=>[i(R,{class:"header-image",src:e.$request.imageBaseUrl+S.courseInfo.iconPath},null,8,["src"]),i(Q,{class:"header-info-bg"},{default:o((()=>[i(Q,{class:"header-info-left"},{default:o((()=>[i(Q,{class:"header-title-bg"},{default:o((()=>[i(Q,{class:"coutse-category"},{default:o((()=>[r(n(S.courseInfo.typeName),1)])),_:1}),i(Q,{class:"course-title"},{default:o((()=>[r(n(S.courseInfo.title)+"中国音乐学院基本乐科1级",1)])),_:1})])),_:1}),i(j,{class:"num-people"},{default:o((()=>[r(n(S.courseInfo.numPeople)+"人已学习",1)])),_:1})])),_:1}),i(Q,{class:"star-bg"},{default:o((()=>[i(j,{class:"p-b-xs"},{default:o((()=>[r(n(S.courseInfo.star.toFixed(1)),1),i(j,{class:"star-text"},{default:o((()=>[r("分")])),_:1})])),_:1}),i(q,{size:10,readonly:!0,max:5,value:S.courseInfo.star},null,8,["value"])])),_:1})])),_:1})])),_:1}),i(Q,{class:"course-bg"},{default:o((()=>[i(Q,{class:"course-content"},{default:o((()=>[i(Q,{class:"switch-title"},{default:o((()=>[i(Q,{onClick:s[0]||(s[0]=e=>B.clickSwitch(0)),class:d(["section-title-bg",{"switch-select":0==S.selectType}])},{default:o((()=>[i(Q,{class:"section-title-line"},{default:o((()=>[r("课程介绍")])),_:1})])),_:1},8,["class"]),i(Q,{onClick:s[1]||(s[1]=e=>B.clickSwitch(1)),class:d(["section-title-bg",{"switch-select":1==S.selectType}])},{default:o((()=>[i(Q,{class:"section-title-line"},{default:o((()=>[r("课程目标")])),_:1})])),_:1},8,["class"]),i(Q,{onClick:s[2]||(s[2]=e=>B.clickSwitch(2)),class:d(["section-title-bg",{"switch-select":2==S.selectType}])},{default:o((()=>[i(Q,{class:"section-title-line"},{default:o((()=>[r("课程评价")])),_:1})])),_:1},8,["class"])])),_:1}),i(L,{style:{margin:"0px"}}),0==S.selectType?(a(),l(j,{key:0,class:"brief",innerHTML:B.brief},null,8,["innerHTML"])):1==S.selectType?(a(!0),u(A,{key:1},f(S.courseCatalogList,((e,s)=>(a(),l(Q,{class:"course-catalog"},{default:o((()=>[i(Q,{class:"d-flex"},{default:o((()=>[i(Q,{class:"course-section"},{default:o((()=>[r(n(e.title),1)])),_:2},1024)])),_:2},1024),(a(!0),u(A,null,f(e.children,((e,s)=>(a(),l(Q,{onClick:s=>B.clickCourseItem(e),class:"course-item"},{default:o((()=>[i(Q,{class:d({"newd-charge":1==e.chargeStatus})},{default:o((()=>[r(n(e.title),1)])),_:2},1032,["class"]),i(Q,{class:"course-item-icon"},{default:o((()=>[1!=e.chargeStatus?(a(),l(w,{key:0,type:"forward",size:"18"})):(a(),l(R,{key:1,class:"lock",src:"data:image/png;base64,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"}))])),_:2},1024)])),_:2},1032,["onClick"])))),256))])),_:2},1024)))),256)):2==S.selectType?(a(),l(v,{key:2},{default:o((()=>[(a(!0),u(A,null,f(S.courseComment,((s,t)=>(a(),l(O,null,{body:o((()=>[i(Q,{class:"comment-body"},{default:o((()=>[i(Q,{class:"user-info"},{default:o((()=>[i(R,{class:"user-header",src:e.$request.imageBaseUrl+s.qycUsermember.headIconPath},null,8,["src"]),i(Q,{class:"m-l-md"},{default:o((()=>[i(Q,{class:"user-nick"},{default:o((()=>[r(n(s.qycUsermember.userName),1)])),_:2},1024),i(Q,{class:"creattime"},{default:o((()=>[r(n(s.createTime),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),i(Q,{class:"comment-content"},{default:o((()=>[r(n(s.content),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),256))])),_:1})):m("",!0)])),_:1})])),_:1}),i(Q,{class:"bottom-bg"},{default:o((()=>[i(Q,{class:"space"}),i(Q,{class:"bottom-content"},{default:o((()=>[i(Q,{class:"price-bg"},{default:o((()=>[null!=S.user&&null!=S.courseInfo&&1==S.courseInfo.isPay?(a(),u(A,{key:0},[i(Q,null,{default:o((()=>[r("价格：")])),_:1}),i(Q,{class:"price-text"},{default:o((()=>[r("¥ "+n(B.coursePrice(S.courseInfo)),1)])),_:1}),S.user&&0!=S.user.isVip?m("",!0):(a(),l(Q,{key:0,class:"vip-price-text"},{default:o((()=>[r(n(0==S.courseInfo.vipPrice?"VIP免费":"VIP: ￥"+S.courseInfo.vipPrice),1)])),_:1}))],64)):m("",!0)])),_:1}),1!=S.courseInfo.isPay?(a(),l(Q,{key:0,onClick:B.joinStudy,class:"bottom-btn"},{default:o((()=>[r("加入学习")])),_:1},8,["onClick"])):1==S.courseInfo.isComment?(a(),l(Q,{key:1,onClick:B.readComment,class:"bottom-btn"},{default:o((()=>[r("查看评价")])),_:1},8,["onClick"])):(a(),l(Q,{key:2,onClick:B.writeComment,class:"bottom-btn"},{default:o((()=>[r("写评价,得金币")])),_:1},8,["onClick"]))])),_:1})])),_:1})],64)):m("",!0)])),_:1})}],["__scopeId","data-v-c2a10193"]]);export{S as default};
