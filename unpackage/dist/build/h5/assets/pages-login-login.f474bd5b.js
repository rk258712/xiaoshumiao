import{j as e,E as t,m as s,G as n,H as o,I as i,y as a,s as l,z as d,A as r,o as c,c as u,w as g,i as h,f as p,g as m,t as f,d as C,h as k,J as w,K as y,L as _}from"./index-dc4240aa.js";import{_ as v}from"./_plugin-vue_export-helper.1b428a4d.js";const I=v({data:()=>({phone:"",password:"",smsCode:"",securityInput:!0,agreementChecked:!1,passwordLogin:!0,sending:!1,codetime:0}),onShow(){console.log("onShow for login");let t=e("LoginAgreement");t&&(this.agreementChecked=t)},methods:{onClickLeft(){t({url:"/pages/study/study"})},inputPhone(e){console.log(e.detail.value),this.phone=e.detail.value},inputPassword(e){console.log(e.detail.value),this.password=e.detail.value},inputSmsCode(e){console.log(e.detail.value),this.smsCode=e.detail.value},userAgreement(){s({url:"/pages/agreement/agreement?data="+encodeURIComponent(JSON.stringify({typeStr:"1",title:"用户协议"}))})},privacyAgreement(){s({url:"/pages/agreement/agreement?data="+encodeURIComponent(JSON.stringify({typeStr:"2",title:"隐私协议"}))})},login(){if(0!=this.phone.length){if(this.passwordLogin){if(0==this.password.length)return void this.showToast("请输入密码")}else if(0==this.smsCode.length)return void this.showToast("请输入验证码");this.agreementChecked?this.$request.post("/api/login/login",{mobile:this.phone,password:this.password}).then((e=>{let t=e.data.token;n(t);let s=e.data;o(s),i()}),(function(e){a({title:e.msg,duration:2e3,icon:"none"})})):this.showToast("请同意用户协议和隐私政策")}else this.showToast("请输入手机号")},forget(){s({url:"/pages/login/forget"})},regist(){s({url:"/pages/login/regist"})},changeSecurity(){this.securityInput=!this.securityInput},changeAgreementStatus(){this.agreementChecked=!this.agreementChecked,l("LoginAgreement",this.agreementChecked)},changeLoginType(){this.passwordLogin=!this.passwordLogin},sendPhoneCode(){if(this.codetime>0)return;if(0==this.phone.length)return void this.showToast("请输入手机号");d();let e=this;this.$request.post("/api/login/yzm",{phone:this.phone}).then((t=>{r(),a({title:e.$t("sendSuccessfully"),duration:2e3,icon:"none"}),e.countTime()}),(function(e){r(),a({title:e.msg,duration:2e3,icon:"none"})}))},countTime(){this.codetime=60;let e=setInterval((()=>{console.log("codetime:"+this.codetime),this.codetime--,this.codetime<1&&(clearInterval(e),this.codetime=0)}),1e3)},showToast(e){a({title:e,duration:2e3,icon:"none"})}},computed:{mailPleaseHodel(){return this.$t("login.mailboxNumberPleaseHolder")},passwordPleaseHodel(){return this.$t("login.passwordPleaseHolder")}}},[["render",function(e,t,s,n,o,i){const a=k,l=h,d=w,r=y,v=_;return c(),u(l,null,{default:g((()=>[p(l,{class:"lg"},{default:g((()=>[p(a,{style:{color:"#333333","font-size":"24px"}},{default:g((()=>[m(f(o.passwordLogin?"密码登录":"短信验证码登录"),1)])),_:1}),o.passwordLogin?C("",!0):(c(),u(a,{key:0,class:"smslogin-tip"},{default:g((()=>[m("未注册的手机号将在验证过后自动注册。")])),_:1}))])),_:1}),p(l,{class:"content-bg"},{default:g((()=>[p(l,{class:"input-content-bg"},{default:g((()=>[p(l,{class:"title"},{default:g((()=>[m("+86")])),_:1}),p(l,{class:"v-line"}),p(d,{class:"input",placeholder:"请输入手机号码",onInput:i.inputPhone},null,8,["onInput"])])),_:1}),o.passwordLogin?(c(),u(l,{key:0,class:"input-content-bg"},{default:g((()=>[p(l,{class:"title"},{default:g((()=>[m("密码")])),_:1}),p(l,{class:"v-line"}),p(d,{class:"input",placeholder:"请输入密码",onInput:i.inputPassword},null,8,["onInput"])])),_:1})):C("",!0),o.passwordLogin?C("",!0):(c(),u(l,{key:1,class:"input-content-bg"},{default:g((()=>[p(l,{class:"title"},{default:g((()=>[m("验证码")])),_:1}),p(l,{class:"v-line"}),p(d,{class:"input",placeholder:"请输入验证码",onInput:i.inputSmsCode},null,8,["onInput"]),0<o.codetime?(c(),u(r,{key:0,class:"send fix-width send-dis"},{default:g((()=>[m(f(o.codetime+"秒"),1)])),_:1})):(c(),u(r,{key:1,class:"send",onClick:i.sendPhoneCode},{default:g((()=>[m("获取验证码")])),_:1},8,["onClick"]))])),_:1})),p(l,{class:"agreement-tip"},{default:g((()=>[p(v,{onClick:i.changeAgreementStatus,style:{transform:"scale(0.6)"},checked:o.agreementChecked,color:"#70CAA3"},null,8,["onClick","checked"]),m("我已阅读并且同意"),p(a,{class:"agreement",onClick:i.userAgreement},{default:g((()=>[m("服务使用协议")])),_:1},8,["onClick"]),m("和"),p(a,{class:"agreement",onClick:i.privacyAgreement},{default:g((()=>[m("隐私协议")])),_:1},8,["onClick"])])),_:1}),p(l,{class:"login-btn",onClick:i.login},{default:g((()=>[m("登录")])),_:1},8,["onClick"]),p(l,{class:"switch-login-type",onClick:i.changeLoginType},{default:g((()=>[m("切换为验证码登录")])),_:1},8,["onClick"]),o.passwordLogin?C("",!0):(c(),u(l,{key:2,onClick:i.forget,class:"forget-password"},{default:g((()=>[m("忘记密码")])),_:1},8,["onClick"]))])),_:1})])),_:1})}],["__scopeId","data-v-1156a0a3"]]);export{I as default};
